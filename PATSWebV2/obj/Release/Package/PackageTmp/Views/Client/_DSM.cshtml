@model PATSWebV2.ViewModels.DSM.DsmViewModel
<style>
    .k-tabstrip-items {
        padding: 0px;
    }

        .k-tabstrip-items .k-item {
            height: 25px;
            font-size: 13px;
            font-weight: bolder;
            background-color: #E6E6FA;
        }

    .k-tabstrip .k-content.k-state-active {
        padding: 0px;
        background-color: #E6E6FA !important;
    }

    #dsmTabstrip {
        margin: 0;
        padding: 0;
        border-width: 0;
        height: 100vh; /* DO NOT USE !important for setting the Grid height!*/
    }
     .k-grid tr td{
        line-height: 18px !important;
        min-height: 18px !important;
        height: 18px !important;
        font-size:14px;
        border-bottom:0.5px solid silver!important;
      }  
    .ui-dialog-titlebar {
        background-color: #E6E6FA;
    }
</style>

@*<div id="caseReEntryIMHSdiv">*@
    @*<br />*@
    @Html.HiddenFor(m => m.EpisodeId, new { @id= "hdEpisodeId" })
    @Html.HiddenFor(m => m.ActiveTabIn, new { @id = "hdDSMActiveTab" })
<script>
        function dsmTabChanged(e) {
            WaitDialog(1);
           if (e.item.textContent == "Back to dashboard") {
                url = '@Url.Action("GetEditingPaneBack", "Client")';
                fndata = { EpisodeID: $("#AllSelectedOffenderEpisodeResult").val() };
                LoadSelectedTab(url, fndata, "#editingpane");
            }
            else
                reloadTab(e);

            WaitDialog(0);
        }
        function reloadTab(e) {
            $('#dsmTabstrip').data('kendoTabStrip').reload(e.item);
        }
</script>

<div id="dsmtabs" class="k-content">
    @(Html.Kendo().TabStrip()
         .Name("dsmTabstrip")
         .Events(e =>
         {
             e.Select("dsmTabChanged");
         })
         .HtmlAttributes(new { style = "padding:0; height:auto;width:98vw;background-color:#E6E6FA;" })
         .Animation(animation =>
             animation.Open(effect =>
                 effect.Fade(FadeDirection.In)))
      .Items(tabstrip =>
      {
          tabstrip.Add().Text("DSM DIAGNOSIS")
           .LoadContentFrom("GetDsmDiagnosis", "Client", new
           {
               EpisodeId = Model.EpisodeId,
               DsmId = 0
           });
          tabstrip.Add().Text("DSM HISTORY")
                 .LoadContentFrom("GetDsmHis", "Client", new { EpisodeId = Model.EpisodeId });
          tabstrip.Add().Text("Back to dashboard").HtmlAttributes(new { style = "float:right;" });
      }
    ))
</div>
<script type="text/javascript">
        $(document).ready(function () {
            var tabidex = 0;
            switch ($("#hdDSMActiveTab").val())
            {
                case "dsmmain": { tabidex = 1; break; }
                case "dsmhis": { tabidex = 2; break; }
            }
            $("#dsmTabstrip").kendoTabStrip().data("kendoTabStrip").activateTab($("#dsmTabstrip-" + tabidex.toString()));
            $('#dsmTabstrip').getKendoTabStrip().select(tabidex -1);
      });
</script>
    